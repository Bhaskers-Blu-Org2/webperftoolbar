<!DOCTYPE html>
<html>
    <head>
        <title>Demo for WebPerfToolbar</title>
    </head>
    <body>
        <script defer>
            (function() {
                var initFunc = function() {
                    var s = document.createElement("script");
                    s.setAttribute("src", "dist\\bundle.js");
                    s.setAttribute("defer", "true");
                    s.onload = startFunc;
                    document.body.appendChild(s);
                }

                var startFunc = function() {
                    /** Fake a panel with a single button */
                    var fakePanel = {
                        getButtons: function () {
                            return [new PerfToolbar.Button({
                                emoji: '#',
                                getValue: function () { return '1'},
                                getColor: function () { return 'gray'}
                            })];
                        }
                    };

                    /** Fake another panel with a single button */
                    var fakePanel2 = {
                        getButtons: function () {
                            return [new PerfToolbar.Button({
                                emoji: '#',
                                getValue: function () { return '2'},
                                getColor: function () { return 'lightgray'}
                            })];
                        }
                    };

                    /** Configure this to include the panels you need */
                    (new PerfToolbar.Toolbar([
                        fakePanel,
                        fakePanel2
                    ])).render();
                    /** End configuration */
                }

                if('requestIdleCallback' in window)
                    requestIdleCallback(initFunc);
                else if(document.readyState == 'complete')
                    initFunc();
                else
                    document.addEventListener("load", function() {
                        setTimeout(initFunc, 1000);
                    });
            })();
        </script>
    </body>
</html>
